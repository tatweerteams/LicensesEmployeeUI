{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport axios from \"axios\";\nimport store from \"../store\";\nimport { getToken, getXAntiForgeryWithKey } from \"./session\";\nimport router from \"../router/index.js\";\n// create an axios instance\nvar service = axios.create({\n  // baseURL: \"https://localhost:7208\",\n  baseURL: \"https://mobile.tatweer.ly:44370\",\n  timeout: 90000 // request timeout\n});\n// var test=  getXAntiForgeryWithKey();\n// service.defaults.headers['X-XSRF-TOKEN'] = test;\n\n// request interceptor\nservice.interceptors.request.use(function (config) {\n  // do something before request is sent\n\n  // config.headers[\"X-XSRF-TOKEN\"] = test;\n  if (store.getters[\"auth/getToken\"]) {\n    config.headers[\"Authorization\"] = \"Bearer \" + getToken();\n  }\n  return config;\n}, function (error) {\n  // do something with request error\n  console.log(error); // for debug\n  return Promise.reject(error);\n});\n\n// response interceptor\nservice.interceptors.response.use(function (response) {\n  var res = response.data;\n\n  // if the custom code is not 20000, it is judged as an error.\n  if (response.status !== 200) {\n    return Promise.reject(new Error(res.message || \"Error\"));\n  } else {\n    if (res.stateResult == 1) {\n      return Promise.reject(res.messages[0]);\n    }\n    if (res.stateResult == 2) {\n      return Promise.reject(res.messages[0]);\n    }\n    if (res.state == 3) {\n      return Promise.reject(res.messages[0].error);\n    }\n    if (res.stateResult == 4) {\n      router.replace(\"/401\").catch(function () {});\n      return Promise.reject(res.messages[0]);\n    }\n    if (res.stateResult == 5) {\n      return Promise.reject(res.messages[0]);\n    }\n    if (res.stateResult == 6) {\n      return Promise.reject(res);\n    }\n    if (res.stateResult == 7) {\n      router.replace(\"/WorkTime\").catch(function () {});\n      return res;\n      // return Promise.reject(res.messages[0]);\n    }\n\n    if (res.stateResult == 0) {\n      return res;\n    }\n  }\n}, function (error) {\n  console.log(\"err\" + error); // for debug\n  return Promise.reject(\"يرجى مراجعة المسؤول على النظام\");\n});\nexport default service;","map":{"version":3,"names":["axios","store","getToken","getXAntiForgeryWithKey","router","service","create","baseURL","timeout","interceptors","request","use","config","getters","headers","error","console","log","Promise","reject","response","res","data","status","Error","message","stateResult","messages","state","replace","catch"],"sources":["D:/repo Tatweer/tatweerteams/CheckbooksOrderingUI/src/util/baseUrlCustomer.js"],"sourcesContent":["import axios from \"axios\";\r\nimport store from \"../store\";\r\nimport { getToken,getXAntiForgeryWithKey } from \"./session\";\r\nimport router from \"../router/index.js\";\r\n// create an axios instance\r\nconst service = axios.create({\r\n  // baseURL: \"https://localhost:7208\",\r\n   baseURL: \"https://mobile.tatweer.ly:44370\",\r\n  timeout: 90000, // request timeout\r\n});\r\n// var test=  getXAntiForgeryWithKey();\r\n// service.defaults.headers['X-XSRF-TOKEN'] = test;\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  (config) => {\r\n    // do something before request is sent\r\n  \r\n    // config.headers[\"X-XSRF-TOKEN\"] = test;\r\n    if (store.getters[\"auth/getToken\"]) {\r\n      config.headers[\"Authorization\"] = \"Bearer \" + getToken();\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // do something with request error\r\n    console.log(error); // for debug\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  (response) => {\r\n    const res = response.data;\r\n\r\n    // if the custom code is not 20000, it is judged as an error.\r\n    if (response.status !== 200) {\r\n      return Promise.reject(new Error(res.message || \"Error\"));\r\n    } else {\r\n      if (res.stateResult == 1) {\r\n        return Promise.reject(res.messages[0]);\r\n      }\r\n\r\n      if (res.stateResult == 2) {\r\n        return Promise.reject(res.messages[0]);\r\n      }\r\n\r\n      if (res.state == 3) {\r\n        return Promise.reject(res.messages[0].error);\r\n      }\r\n      if (res.stateResult == 4) {\r\n        router.replace(\"/401\").catch(() => {});\r\n        return Promise.reject(res.messages[0]);\r\n      }\r\n      if (res.stateResult == 5) {\r\n        return Promise.reject(res.messages[0]);\r\n      }\r\n\r\n      if (res.stateResult == 6) {\r\n        return Promise.reject(res);\r\n      }\r\n\r\n      if (res.stateResult == 7) {\r\n        router.replace(\"/WorkTime\").catch(() => {});\r\n        return res;\r\n        // return Promise.reject(res.messages[0]);\r\n      }\r\n\r\n      if (res.stateResult == 0) {\r\n        return res;\r\n      }\r\n    }\r\n  },\r\n  (error) => {\r\n    console.log(\"err\" + error); // for debug\r\n    return Promise.reject(\"يرجى مراجعة المسؤول على النظام\");\r\n  }\r\n);\r\n\r\nexport default service;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}