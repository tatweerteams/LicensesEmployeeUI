{"ast":null,"code":"import _objectSpread from \"D:/repo Tatweer/tatweerteams/CheckbooksOrderingUI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapActions } from \"vuex\";\nimport { EventBus } from \"../../../eventBus\";\nimport resetPasswordComponent from \"../components/resetPasswordComponents.vue\";\nimport { validationInput } from \"../../../models/validationInput\";\nexport default {\n  components: {\n    resetPasswordComponent: resetPasswordComponent\n  },\n  created: function created() {\n    var _this = this;\n    EventBus.$on(\"closeResetPasswordDialog\", function () {\n      _this.dialogResetPassword = false;\n    });\n  },\n  data: function data() {\n    return {\n      hidePassword: true,\n      valid: false,\n      validationInput: validationInput,\n      loading: false,\n      badPassUser: false,\n      dialogResetPassword: false,\n      nameRules: [function (v) {\n        return !!v || \"الرجاء إدخال بريد الإلكتروني أو رقم الوظيفي\";\n      }, function (v) {\n        return v && v.length >= 3 || \"يجب إدخال بطريقة الصحيحة\";\n      }],\n      passwordRules: [function (v) {\n        return !!v || \"الرجاء إدخال كلمة المرور\";\n      }, function (v) {\n        return v && v.length >= 4 || \"يجب إدخال كلمة المرور بطريقة الصحيحة\";\n      }],\n      userName: \"\",\n      password: \"\"\n    };\n  },\n  props: {\n    srcse: String\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    loginUser: \"auth/login\",\n    setTokenLoginUser: \"auth/SetTokenLoginUser\"\n  })), {}, {\n    validationCheck: function validationCheck(val) {\n      var message = \"يجب إدخال بطريقة صجيجة\";\n      var numberOnly = /^[0-9]*$/.test(val);\n      var english = /^[A-Za-z]*$/.test(val);\n      var emile =\n      //eslint-disable-next-line\n      /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\n      //eslint-disable-next-line\n      val);\n      if (numberOnly) {\n        message = \"\";\n      }\n      if (emile) {\n        message = \"\";\n      }\n      if (english) {\n        message = \"\";\n      }\n      return !message ? true : message;\n    },\n    signin: function signin() {\n      var _this2 = this;\n      this.loading = true;\n      this.$store.dispatch(\"loading\", true);\n      if (this.$refs.form.validate()) {\n        this.loginUser({\n          nameOrNumber: this.userName,\n          password: this.password\n        }).then(function () {\n          _this2.nextPage();\n        }).catch(function (error) {\n          _this2.$store.dispatch(\"loading\", false);\n          _this2.notify(error, \"#1d262d\");\n          _this2.badPassUser = true;\n          _this2.loading = false;\n        });\n      } else {\n        this.$store.dispatch(\"loading\", false);\n        this.loading = false;\n      }\n    },\n    nextPage: function nextPage() {\n      var currentUser = this.$store.getters[\"auth/getInfo\"];\n      if ((currentUser === null || currentUser === void 0 ? void 0 : currentUser.isFirstLogin) == null) {\n        this.setTokenLoginUser(currentUser);\n        this.$router.push(\"/\").catch(function () {});\n        this.$store.dispatch(\"loading\", false);\n        this.loading = false;\n        return;\n      }\n      if ((currentUser === null || currentUser === void 0 ? void 0 : currentUser.isFirstLogin) == false) {\n        this.dialogResetPassword = true;\n        this.$store.dispatch(\"loading\", false);\n        this.loading = false;\n        return;\n      }\n      if ((currentUser === null || currentUser === void 0 ? void 0 : currentUser.isFirstLogin) == true) {\n        this.setTokenLoginUser(currentUser);\n        this.$router.push(\"/\").catch(function () {});\n        this.$store.dispatch(\"loading\", false);\n        this.loading = false;\n        return;\n      }\n    },\n    notify: function notify(text, color) {\n      this.$store.commit(\"showMessage\", {\n        text: text,\n        color: color\n      });\n    }\n  })\n};","map":{"version":3,"mappings":";;;;AAkGA;AACA;AACA;AACA;AACA;EACAA;IACAC;EACA;EACAC;IAAA;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,YACA;QAAA;MAAA,GACA;QAAA;MAAA,EACA;MACAC,gBACA;QAAA;MAAA,GACA;QAAA;MAAA,EACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;EACA;EACAC,yCACAC;IACAC;IACAC;EACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC,IACA;MACA;QACAC;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MAEA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;UACAC;UACAX;QACA,GACAY;UACA;QACA,GACAC;UACA;UACA;UACA;UACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEAC;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;MAEA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;QAAAC;QAAAC;MAAA;IACA;EAAA;AAEA","names":["components","resetPasswordComponent","created","EventBus","data","hidePassword","valid","validationInput","loading","badPassUser","dialogResetPassword","nameRules","passwordRules","userName","password","props","srcse","methods","mapActions","loginUser","setTokenLoginUser","validationCheck","val","message","signin","nameOrNumber","then","catch","nextPage","notify","text","color"],"sourceRoot":"src/views/login/page","sources":["index.vue"],"sourcesContent":["<template>\r\n  <v-container fill-height fluid style=\"background-color: #e4e8ed;\">\r\n    <resetPasswordComponent :resetPasswordDialogProp=\"dialogResetPassword\">\r\n    </resetPasswordComponent>\r\n\r\n    <v-row align=\"center\" justify=\"center\">\r\n      <v-col cols=\"12\" sm=\"6\">\r\n        <v-card class=\"elevation-6\" min-height=\"500\">\r\n          <v-row>\r\n            <v-col\r\n              cols=\"12\"\r\n              sm=\"6\"\r\n              style=\"background-color: #081D38;height: 500px; \"\r\n              class=\"rounded-bl-xl elevation-10 hidden-sm-and-down\"\r\n            >\r\n              <div style=\"text-align: center; padding: 180px 0\">\r\n                <v-card-text class=\"white--text\">\r\n                  <!-- <h4 class=\"mt-3\">نــظــام طـلـب دفــاتـر الــصـكـوك</h4> -->\r\n                </v-card-text>\r\n              </div>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"6\" class=\"d-flex flex-column-reverse\">\r\n              <v-card-text class=\" \">\r\n                <h3 class=\"text-center\">\r\n                  تسجيل الدخول\r\n                </h3>\r\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n                  <v-row align=\"center\" justify=\"center\">\r\n                    <v-col cols=\"12\" sm=\"10\">\r\n                      <v-text-field\r\n                        prepend-inner-icon=\"person\"\r\n                        dense\r\n                        name=\"Email\"\r\n                        persistent-placeholder\r\n                        label=\"رقم الوطيفي أو بريد الإلكتروني\"\r\n                        type=\"text\"\r\n                        color=\"accent-3\"\r\n                        v-model=\"userName\"\r\n                        persistent-hint\r\n                        :rules=\"[validationInput.isEmpty, validationCheck]\"\r\n                        :aria-autocomplete=\"false\"\r\n                        style=\"color: blue !important\"\r\n                        class=\"mt-12\"\r\n                      />\r\n\r\n                      <v-text-field\r\n                        :type=\"hidePassword ? 'password' : 'text'\"\r\n                        :append-icon=\"\r\n                          hidePassword ? 'visibility_off' : 'visibility'\r\n                        \"\r\n                        prepend-inner-icon=\"lock\"\r\n                        persistent-hint\r\n                        persistent-placeholder\r\n                        label=\"كلمة المرور\"\r\n                        name=\"Password\"\r\n                        dense\r\n                        :aria-autocomplete=\"false\"\r\n                        id=\"password\"\r\n                        :rules=\"passwordRules\"\r\n                        v-model=\"password\"\r\n                        class=\"mt-6\"\r\n                        style=\"color: blue !important\"\r\n                        @click:append=\"hidePassword = !hidePassword\"\r\n                      />\r\n                    </v-col>\r\n                    <v-col cols=\"12\" sm=\"6\">\r\n                      <v-btn\r\n                        block\r\n                        dark\r\n                        rounded\r\n                        class=\"mb-10 mt-3\"\r\n                        elevation=\"10\"\r\n                        color=\"#081D38\"\r\n                        @click=\"signin\"\r\n                        :loading=\"loading\"\r\n                        >تسجيل الدخول</v-btn\r\n                      >\r\n                    </v-col>\r\n                  </v-row>\r\n                </v-form>\r\n              </v-card-text>\r\n              <v-row>\r\n                <v-col cols=\"12\" class=\"text-center\">\r\n                  <v-avatar size=\"150\" color=\"#081D38\">\r\n                    <v-icon size=\"100\" color=\"white\">\r\n                      lock\r\n                    </v-icon>\r\n                  </v-avatar>\r\n                </v-col>\r\n              </v-row>\r\n            </v-col>\r\n          </v-row>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport { EventBus } from \"../../../eventBus\";\r\nimport resetPasswordComponent from \"../components/resetPasswordComponents.vue\";\r\nimport { validationInput } from \"../../../models/validationInput\";\r\nexport default {\r\n  components: {\r\n    resetPasswordComponent: resetPasswordComponent,\r\n  },\r\n  created() {\r\n    EventBus.$on(\"closeResetPasswordDialog\", () => {\r\n      this.dialogResetPassword = false;\r\n    });\r\n  },\r\n  data() {\r\n    return {\r\n      hidePassword: true,\r\n      valid: false,\r\n      validationInput: validationInput,\r\n      loading: false,\r\n      badPassUser: false,\r\n      dialogResetPassword: false,\r\n      nameRules: [\r\n        (v) => !!v || \"الرجاء إدخال بريد الإلكتروني أو رقم الوظيفي\",\r\n        (v) => (v && v.length >= 3) || \"يجب إدخال بطريقة الصحيحة\",\r\n      ],\r\n      passwordRules: [\r\n        (v) => !!v || \"الرجاء إدخال كلمة المرور\",\r\n        (v) => (v && v.length >= 4) || \"يجب إدخال كلمة المرور بطريقة الصحيحة\",\r\n      ],\r\n      userName: \"\",\r\n      password: \"\",\r\n    };\r\n  },\r\n  props: {\r\n    srcse: String,\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      loginUser: \"auth/login\",\r\n      setTokenLoginUser: \"auth/SetTokenLoginUser\",\r\n    }),\r\n\r\n    validationCheck(val) {\r\n      let message = \"يجب إدخال بطريقة صجيجة\";\r\n      var numberOnly = /^[0-9]*$/.test(val);\r\n      var english = /^[A-Za-z]*$/.test(val);\r\n      var emile =\r\n        //eslint-disable-next-line\r\n        /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\r\n          //eslint-disable-next-line\r\n          val\r\n        );\r\n      if (numberOnly) {\r\n        message = \"\";\r\n      }\r\n      if (emile) {\r\n        message = \"\";\r\n      }\r\n      if (english) {\r\n        message = \"\";\r\n      }\r\n\r\n      return !message ? true : message;\r\n    },\r\n    signin() {\r\n      this.loading = true;\r\n      this.$store.dispatch(\"loading\", true);\r\n      if (this.$refs.form.validate()) {\r\n        this.loginUser({\r\n          nameOrNumber: this.userName,\r\n          password: this.password,\r\n        })\r\n          .then(() => {\r\n            this.nextPage();\r\n          })\r\n          .catch((error) => {\r\n            this.$store.dispatch(\"loading\", false);\r\n            this.notify(error, \"#1d262d\");\r\n            this.badPassUser = true;\r\n            this.loading = false;\r\n          });\r\n      } else {\r\n        this.$store.dispatch(\"loading\", false);\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    nextPage() {\r\n      var currentUser = this.$store.getters[\"auth/getInfo\"];\r\n      if (currentUser?.isFirstLogin == null) {\r\n        this.setTokenLoginUser(currentUser);\r\n        this.$router.push(\"/\").catch(() => {});\r\n        this.$store.dispatch(\"loading\", false);\r\n        this.loading = false;\r\n        return;\r\n      }\r\n      if (currentUser?.isFirstLogin == false) {\r\n        this.dialogResetPassword = true;\r\n        this.$store.dispatch(\"loading\", false);\r\n        this.loading = false;\r\n        return;\r\n      }\r\n\r\n      if (currentUser?.isFirstLogin == true) {\r\n        this.setTokenLoginUser(currentUser);\r\n        this.$router.push(\"/\").catch(() => {});\r\n        this.$store.dispatch(\"loading\", false);\r\n        this.loading = false;\r\n        return;\r\n      }\r\n    },\r\n    notify(text, color) {\r\n      this.$store.commit(\"showMessage\", { text: text, color: color });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n#login {\r\n  height: 50%;\r\n  width: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  content: \"\";\r\n  z-index: 0;\r\n}\r\n.rounded-bl-xl {\r\n  border-bottom-left-radius: 300px !important;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}