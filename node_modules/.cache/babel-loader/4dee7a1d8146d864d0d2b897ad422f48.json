{"ast":null,"code":"import _objectSpread from \"D:/repo Tatweer/tatweerteams/CheckbooksOrderingUI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { mapActions } from \"vuex\";\nimport * as enums from \"../../../models/enum.js\";\nexport default {\n  name: \"Serach-compnent\",\n  props: {\n    otherProcess: {}\n  },\n  data: function data() {\n    return {\n      filterData: {\n        branchId: null,\n        branchRegionId: null,\n        identityNo: \"\",\n        requestState: null,\n        orderRequestType: null,\n        fromDate: null,\n        toDate: null,\n        pageNo: 1,\n        pageSize: 30\n      },\n      enumModel: enums,\n      regions: [],\n      isLoadingRegion: false,\n      selectedRegion: null,\n      searchRegion: null,\n      filterRegionData: {\n        //   bankId: null,\n        regionName: null\n      },\n      branchs: [],\n      isLoadingBranch: false,\n      selectedBranch: null,\n      searchBranch: null,\n      filterBranchData: {\n        branchRegionId: null,\n        nameOrNumber: null\n      },\n      searchName: \"\"\n    };\n  },\n  watch: {\n    searchName: function searchName(val) {\n      this.filterData.identityNo = val;\n    },\n    searchRegion: function searchRegion(val) {\n      this.filterRegionData.regionName = val;\n    },\n    searchBranch: function searchBranch(val) {\n      // if(this.isLoadingBranch) return;\n      this.filterBranchData.nameOrNumber = val;\n    },\n    selectedRegion: function selectedRegion(val) {\n      if (!val) this.clearBranchData();\n    },\n    filterIsSelected: function filterIsSelected(val) {\n      if (!val) this.searchData();\n    }\n  },\n  computed: {\n    // ...mapFields(\"bankRegionStore\", {\n    //   regions: \"activeBankRegions\",\n    // }),\n    // ...mapFields(\"branchStore\", {\n    //   branchs: \"activeBranchs\",\n    // }),\n    filterIsSelected: function filterIsSelected() {\n      return this.selectedRegion || this.filterData.identityNo || this.filterData.branchId || this.selectedBranch || this.filterData.requestState || this.filterData.orderRequestType;\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    GetActiveBankRegions: \"bankRegionStore/GetActiveBankRegions\",\n    GetActiveBranchs: \"branchStore/GetActiveBranchs\"\n  })), {}, {\n    hasPermassion: function hasPermassion(crrentUser) {\n      this.userPermasstion = this.$store.getters[\"auth/getRole\"];\n      var result = this.userPermasstion.some(function (item) {\n        return crrentUser.includes(item);\n      });\n      return result;\n    },\n    searchData: function searchData() {\n      var _this$selectedRegion$, _this$selectedRegion, _this$selectedBranch$, _this$selectedBranch;\n      this.filterData.branchRegionId = (_this$selectedRegion$ = (_this$selectedRegion = this.selectedRegion) === null || _this$selectedRegion === void 0 ? void 0 : _this$selectedRegion.bankRegionId) !== null && _this$selectedRegion$ !== void 0 ? _this$selectedRegion$ : null;\n      this.filterData.branchId = (_this$selectedBranch$ = (_this$selectedBranch = this.selectedBranch) === null || _this$selectedBranch === void 0 ? void 0 : _this$selectedBranch.id) !== null && _this$selectedBranch$ !== void 0 ? _this$selectedBranch$ : null;\n      this.$emit(\"search-data\", this.filterData);\n    },\n    getBranchByRegionId: function getBranchByRegionId() {\n      var _this$selectedRegion2;\n      if (!this.selectedRegion) {\n        this.clearBranchData();\n        return;\n      }\n      this.filterBranchData.branchRegionId = (_this$selectedRegion2 = this.selectedRegion) === null || _this$selectedRegion2 === void 0 ? void 0 : _this$selectedRegion2.bankRegionId;\n      this.getBranchs();\n    },\n    getBankRegions: function getBankRegions() {\n      var _this = this;\n      this.isLoadingRegion = true;\n      this.GetActiveBankRegions(this.filterRegionData).then(function () {\n        _this.isLoadingRegion = false;\n      }).catch(function () {\n        // this.notify(`${error}`, \"#1d262d\");\n        _this.isLoadingRegion = false;\n      });\n    },\n    getBranchs: function getBranchs() {\n      var _this2 = this;\n      if (!this.selectedRegion) return;\n      this.isLoadingBranch = true;\n      this.GetActiveBranchs(this.filterBranchData).then(function () {\n        _this2.isLoadingBranch = false;\n      }).catch(function () {\n        // this.notify(`${error}`, \"#1d262d\");\n        _this2.isLoadingBranch = false;\n      });\n    },\n    clearRegionData: function clearRegionData() {\n      this.isLoadingRegion = false;\n      this.regions = [];\n      this.selectedRegion = null;\n      this.searchRegion = null;\n      this.filterRegionData.bankId = null;\n      this.filterRegionData.regionName = null;\n    },\n    clearBranchData: function clearBranchData() {\n      this.isLoadingBranch = false;\n      this.branchs = [];\n      this.selectedBranch = null;\n      this.searchBranch = null;\n      this.filterBranchData.branchRegionId = null;\n      this.filterBranchData.nameOrNumber = null;\n    },\n    notify: function notify(text, color) {\n      this.$store.commit(\"showMessage\", {\n        text: text,\n        color: color\n      });\n    }\n  })\n};","map":{"version":3,"mappings":";;;;AAuGA;AAGA;AAEA;EACAA;EACAC;IACAC;EACA;EACAC;IAAA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEAC;MAEAC;MACAC;MACAC;MACAC;MACAC;QACA;QACAC;MACA;MAEAC;MACAC;MACAC;MACAC;MACAC;QACAnB;QACAoB;MACA;MAEAC;IACA;EAAA;EAEAC;IACAD;MACA;IACA;IAEAT;MACA;IACA;IAEAM;MACA;MACA;IACA;IACAP;MACA;IACA;IAEAY;MACA;IACA;EACA;EAEAC;IACA;IACA;IACA;IAEA;IACA;IACA;IAEAD;MACA,OACA,uBACA,8BACA,4BACA,uBACA,gCACA;IAEA;EACA;EACAE,yCACAC;IACAC;IACAC;EACA;IACAC;MACA;MACA;QAAA,OACAC;MAAA,EACA;MACA;IACA;IAEAC;MAAA;MACA,kFACA;MAEA;MAEA;IACA;IAEAC;MAAA;MACA,0BACA;QACA;QACA;MACA;MACA;MACA;IACA;IAEAC;MAAA;MACA;MACA,iDACAC;QACA;MACA,GACAC;QACA;QACA;MACA;IACA;IAEAC;MAAA;MACA;MAEA;MACA,6CACAF;QACA;MACA,GACAC;QACA;QACA;MACA;IACA;IAEAE;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MACA;IAEA;IAGAC;MACA;QAAAC;QAAAC;MAAA;IACA;EAAA;AAEA","names":["name","props","otherProcess","data","filterData","branchId","branchRegionId","identityNo","requestState","orderRequestType","fromDate","toDate","pageNo","pageSize","enumModel","regions","isLoadingRegion","selectedRegion","searchRegion","filterRegionData","regionName","branchs","isLoadingBranch","selectedBranch","searchBranch","filterBranchData","nameOrNumber","searchName","watch","filterIsSelected","computed","methods","mapActions","GetActiveBankRegions","GetActiveBranchs","hasPermassion","crrentUser","searchData","getBranchByRegionId","getBankRegions","then","catch","getBranchs","clearRegionData","clearBranchData","notify","text","color"],"sourceRoot":"src/views/OrderRequest/Components","sources":["SearchOrderRequestComponent.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <v-card elevation=\"3\" height=\"auto\" class=\"px-5\">\r\n      <v-row>\r\n        <v-subheader>\r\n          <v-icon class=\"mx-2\">search</v-icon>\r\n          بحث علي طلبية\r\n        </v-subheader>\r\n      </v-row>\r\n\r\n      <v-row dense class=\"px-5\">\r\n        <v-col dense cols=\"12\" sm=\"6\" md=\"4\">\r\n          <v-text-field\r\n            v-model=\"searchName\"\r\n            label=\"رقم الإشاري\"\r\n            clearable\r\n            dense\r\n            prepend-icon=\"mdi-numeric\"\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" sm=\"6\" md=\"4\" v-if=\"hasPermassion(['AddOrderRequestOtherBranch','AdminSystem'])\">\r\n          <v-autocomplete\r\n            v-model=\"selectedRegion\"\r\n            :items=\"regions\"\r\n            :loading=\"isLoadingRegion\"\r\n            single-line\r\n            :search-input.sync=\"searchRegion\"\r\n            item-text=\"regionName\"\r\n            item-value=\"bankRegionId\"\r\n            label=\"اختر المنطقة\"\r\n            placeholder=\"بحث عن طريق المنطفة\"\r\n            return-object\r\n            no-data-text=\"قم بالبحث عن منطقة\"\r\n            clearable\r\n            @keyup=\"getBankRegions\"\r\n            @change=\"getBranchByRegionId\"\r\n            dense\r\n            prepend-icon=\"mdi-map-marker\"\r\n          ></v-autocomplete>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" sm=\"6\" md=\"4\" v-if=\"hasPermassion(['AddOrderRequestOtherBranch','AdminSystem'])\">\r\n          <v-autocomplete\r\n            v-model=\"selectedBranch\"\r\n            :items=\"branchs\"\r\n            :loading=\"isLoadingBranch\"\r\n            single-line\r\n            :search-input.sync=\"searchBranch\"\r\n            item-text=\"name\"\r\n            item-value=\"id\"\r\n            label=\"اختر الفرع\"\r\n            placeholder=\"بحث عن طريق الفرع\"\r\n            return-object\r\n            no-data-text=\"لايوجد بيانات\"\r\n            clearable\r\n            @keyup=\"getBranchs\"\r\n            prepend-icon=\"mdi-bank\"\r\n            dense\r\n          ></v-autocomplete>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" sm=\"6\" md=\"4\">\r\n          <v-select\r\n            v-model=\"filterData.orderRequestType\"\r\n            :items=\"enumModel.OrderRequestTypeList\"\r\n            label=\"بحث عن طريق نوع الطلب\"\r\n            item-text=\"name\"\r\n            item-value=\"id\"\r\n            dense\r\n            clearable\r\n            persistent-hint\r\n            prepend-icon=\"mdi-account-search\"\r\n          ></v-select>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" sm=\"6\" md=\"4\" v-if=\"!otherProcess\">\r\n          <v-select\r\n            v-model=\"filterData.requestState\"\r\n            :items=\"enumModel.OrderRequestStateList\"\r\n            label=\"بحث عن طريق حالة الطلب\"\r\n            item-text=\"name\"\r\n            item-value=\"id\"\r\n            dense\r\n            clearable\r\n            persistent-hint\r\n            prepend-icon=\"mdi-table-search\"\r\n          ></v-select>\r\n        </v-col>\r\n        <v-col cols=\"12\" class=\"text-center mb-3\">\r\n          <v-btn\r\n            v-if=\"filterIsSelected\"\r\n            color=\"#081D38\"\r\n            class=\"white--text\"\r\n            @click=\"searchData\"\r\n            >فلترة البيانات</v-btn\r\n          >\r\n        </v-col>\r\n      </v-row>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\n\r\n\r\nimport * as enums from \"../../../models/enum.js\";\r\n\r\nexport default {\r\n  name: \"Serach-compnent\",\r\n  props: {\r\n    otherProcess: {},\r\n  },\r\n  data: () => ({\r\n    filterData: {\r\n      branchId: null,\r\n      branchRegionId: null,\r\n      identityNo: \"\",\r\n      requestState: null,\r\n      orderRequestType: null,\r\n      fromDate: null,\r\n      toDate: null,\r\n      pageNo: 1,\r\n      pageSize: 30,\r\n    },\r\n\r\n    enumModel: enums,\r\n\r\n    regions:[],\r\n    isLoadingRegion: false,\r\n    selectedRegion: null,\r\n    searchRegion: null,\r\n    filterRegionData: {\r\n      //   bankId: null,\r\n      regionName: null,\r\n    },\r\n\r\n    branchs:[],\r\n    isLoadingBranch: false,\r\n    selectedBranch: null,\r\n    searchBranch: null,\r\n    filterBranchData: {\r\n      branchRegionId: null,\r\n      nameOrNumber: null,\r\n    },\r\n\r\n    searchName: \"\",\r\n  }),\r\n\r\n  watch: {\r\n    searchName(val) {\r\n      this.filterData.identityNo = val;\r\n    },\r\n\r\n    searchRegion(val) {\r\n      this.filterRegionData.regionName = val;\r\n    },\r\n\r\n    searchBranch(val) {\r\n      // if(this.isLoadingBranch) return;\r\n      this.filterBranchData.nameOrNumber = val;\r\n    },\r\n    selectedRegion(val){\r\n      if(!val) this.clearBranchData();\r\n    },\r\n\r\n    filterIsSelected(val) {\r\n      if (!val) this.searchData();\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    // ...mapFields(\"bankRegionStore\", {\r\n    //   regions: \"activeBankRegions\",\r\n    // }),\r\n\r\n    // ...mapFields(\"branchStore\", {\r\n    //   branchs: \"activeBranchs\",\r\n    // }),\r\n\r\n    filterIsSelected() {\r\n      return (\r\n        this.selectedRegion ||\r\n        this.filterData.identityNo ||\r\n        this.filterData.branchId ||\r\n        this.selectedBranch ||\r\n        this.filterData.requestState ||\r\n        this.filterData.orderRequestType\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      GetActiveBankRegions: \"bankRegionStore/GetActiveBankRegions\",\r\n      GetActiveBranchs: \"branchStore/GetActiveBranchs\",\r\n    }),\r\n    hasPermassion(crrentUser) {\r\n      this.userPermasstion = this.$store.getters[\"auth/getRole\"];\r\n      var result = this.userPermasstion.some((item) =>\r\n        crrentUser.includes(item)\r\n      );\r\n      return result;\r\n    },\r\n\r\n    searchData() {\r\n      this.filterData.branchRegionId =\r\n        this.selectedRegion?.bankRegionId ?? null;\r\n\r\n      this.filterData.branchId = this.selectedBranch?.id ?? null;\r\n\r\n      this.$emit(\"search-data\", this.filterData);\r\n    },\r\n\r\n    getBranchByRegionId() {\r\n      if(!this.selectedRegion)\r\n      {\r\n        this.clearBranchData();\r\n        return ;\r\n      }\r\n      this.filterBranchData.branchRegionId = this.selectedRegion?.bankRegionId;\r\n      this.getBranchs();\r\n    },\r\n\r\n    getBankRegions() {\r\n      this.isLoadingRegion = true;\r\n      this.GetActiveBankRegions(this.filterRegionData)\r\n        .then(() => {\r\n          this.isLoadingRegion = false;\r\n        })\r\n        .catch(() => {\r\n          // this.notify(`${error}`, \"#1d262d\");\r\n          this.isLoadingRegion = false;\r\n        });\r\n    },\r\n\r\n    getBranchs() {\r\n      if (!this.selectedRegion) return;\r\n\r\n      this.isLoadingBranch = true;\r\n      this.GetActiveBranchs(this.filterBranchData)\r\n        .then(() => {\r\n          this.isLoadingBranch = false;\r\n        })\r\n        .catch(() => {\r\n          // this.notify(`${error}`, \"#1d262d\");\r\n          this.isLoadingBranch = false;\r\n        });\r\n    },\r\n\r\n    clearRegionData() {\r\n      this.isLoadingRegion = false;\r\n      this.regions = [];\r\n      this.selectedRegion = null;\r\n      this.searchRegion = null;\r\n      this.filterRegionData.bankId = null;\r\n      this.filterRegionData.regionName = null;\r\n    },\r\n\r\n    clearBranchData() {\r\n      this.isLoadingBranch = false;\r\n      this.branchs = [];\r\n      this.selectedBranch = null;\r\n      this.searchBranch = null;\r\n      this.filterBranchData.branchRegionId = null;\r\n      this.filterBranchData.nameOrNumber = null;\r\n   \r\n    },\r\n\r\n\r\n    notify(text, color) {\r\n      this.$store.commit(\"showMessage\", { text: text, color: color });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}